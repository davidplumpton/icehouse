{"id":"claudecode-5xa","title":"Support %dw 2.0 header on first line for script compatibility","description":"Scripts can optionally start with '%dw 2.0' on the first line for DataWeave compatibility. The parser/handler should recognize and accept this header without treating it as an error.","status":"tombstone","priority":3,"issue_type":"task","created_at":"2025-12-30T21:59:43.043353+13:00","updated_at":"2025-12-30T22:02:57.062252+13:00","deleted_at":"2025-12-30T22:02:57.062252+13:00","deleted_by":"david","delete_reason":"manual delete","original_type":"task"}
{"id":"icehouse-06e","title":"visual indicator for placement timer","description":"css animated circle timer or slider or similar","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T19:45:42.200062+13:00","created_by":"david","updated_at":"2026-01-10T20:15:47.735454+13:00","closed_at":"2026-01-10T20:15:47.735454+13:00","close_reason":"Closed"}
{"id":"icehouse-0al","title":"indicate selected piece type","description":"when a hotkey selects a piece to play there should be an indicator of some sort in the stash area for that player. This becomes more inportant when there are captured pieces","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T09:06:23.079658+13:00","created_by":"david","updated_at":"2026-01-04T09:26:39.341967+13:00","closed_at":"2026-01-04T09:26:39.341967+13:00","close_reason":"Closed","dependencies":[{"issue_id":"icehouse-0al","depends_on_id":"icehouse-te8","type":"parent-child","created_at":"2026-01-04T09:06:38.805107+13:00","created_by":"david"}]}
{"id":"icehouse-0as","title":"game ends at a random time","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T20:34:47.992809+13:00","updated_at":"2026-01-01T10:09:19.032335+13:00","closed_at":"2025-12-28T20:44:20.996976+13:00","close_reason":"Closed","dependencies":[{"issue_id":"icehouse-0as","depends_on_id":"icehouse-vev","type":"blocks","created_at":"2025-12-28T20:34:58.720496+13:00","created_by":"daemon"}]}
{"id":"icehouse-0qr","title":"Remove size option buttons, use 1/2/3 as hotkeys for size selection","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T12:16:20.836605+13:00","updated_at":"2026-01-01T10:09:19.049361+13:00","closed_at":"2025-12-27T12:26:18.895666+13:00","close_reason":"Closed"}
{"id":"icehouse-0vw","title":"placing a piece partially outside the play area is not allowed","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T10:25:06.326416+13:00","updated_at":"2026-01-01T10:09:19.040385+13:00","closed_at":"2025-12-28T11:27:32.958753+13:00","close_reason":"Closed"}
{"id":"icehouse-0zl","title":"adjust relative piece size","description":"the relative sizes of large, medium, and small should be such that the height of the small pyramid is exactly the width of the base of the large pyramid. The medium should be exactly halfway in size","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T14:21:38.354851+13:00","updated_at":"2026-01-01T10:09:19.022547+13:00","closed_at":"2025-12-28T14:29:32.397675+13:00","close_reason":"Closed"}
{"id":"icehouse-11u","title":"playfield pieces should have the same narrower triangle shape as the ones in the player's area","description":"For attacking pieces only\n","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-27T15:00:49.881346+13:00","updated_at":"2026-01-01T10:09:19.02463+13:00","closed_at":"2025-12-28T10:03:11.510305+13:00","close_reason":"Closed"}
{"id":"icehouse-12e","title":"icehouse rule limit","description":"the icehouse rule only applies when you have fewer than 8 unplayed pieces and all of your defending pieces have been successfully attacked. then the player loses immediately","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T21:58:44.684362+13:00","updated_at":"2026-01-01T10:09:19.029767+13:00","closed_at":"2025-12-29T08:58:32.441021+13:00","close_reason":"Closed"}
{"id":"icehouse-16z","title":"Refactor game-canvas component into smaller pieces","description":"game-canvas in src/cljs/icehouse/game.cljs (lines 504-712, ~210 lines) is too large. It handles mouse events, zoom logic, drag state, throttling, and stash interactions all in one. Split into: zoom-handler utility, drag state management helper, and separate event handler components.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-10T20:51:31.197741+13:00","created_by":"david","updated_at":"2026-01-10T20:51:31.197741+13:00"}
{"id":"icehouse-1h0","title":"Remove attack/defend mode buttons, use A/D as hotkeys","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T12:16:44.904728+13:00","updated_at":"2026-01-01T10:09:19.049071+13:00","closed_at":"2025-12-27T12:26:18.899292+13:00","close_reason":"Closed"}
{"id":"icehouse-1n7","title":"Attack range should be attacker's own length, not 2x size","description":"Per official Icehouse rules, an attacking piece must be within its own length of the target defender.\n\nThe length is measured from the front tip of the piece. It seems that some attacks within a valid range are being incorrectly disallowed.\n","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T19:31:33.848778+13:00","updated_at":"2026-01-01T10:09:19.044428+13:00","closed_at":"2025-12-28T11:28:57.094524+13:00","close_reason":"Closed","dependencies":[{"issue_id":"icehouse-1n7","depends_on_id":"icehouse-l3a","type":"blocks","created_at":"2025-12-28T08:33:59.951583+13:00","created_by":"daemon"}]}
{"id":"icehouse-1zo","title":"Fix incorrect test case in game_test.cljs","description":"The 'capturable-piece-test' uses a Large attacker against a Small defender, which results in an excess of 1 pip. A Large piece (3 pips) cannot be captured in this scenario (3 \u003e 1). Update the test to use a valid capture scenario.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-09T09:49:36.438105+13:00","created_by":"david","updated_at":"2026-01-09T09:51:05.336158+13:00","closed_at":"2026-01-09T09:51:05.336158+13:00","close_reason":"Closed"}
{"id":"icehouse-1zx","title":"Add error handling for JSON parsing and WebSocket messages","description":"WebSocket message handler (websocket.cljs:19) has no error handling:\n- JSON.parse can throw if message is invalid JSON\n- No validation that parsed message has required structure\n- Missing case handlers default to js/console.log silently\n- No recovery mechanism if critical message fails to parse\n\nShould wrap parse in try-catch, validate message structure, and handle unknown message types gracefully.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-30T20:53:22.59516+13:00","updated_at":"2026-01-01T10:09:19.02603+13:00","closed_at":"2025-12-31T08:31:55.103595+13:00","close_reason":"Already implemented - try-catch wrapper, msg-type validation, and error logging present"}
{"id":"icehouse-1zz","title":"zooming stopped working while placing a piece","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T11:31:00.529286+13:00","updated_at":"2026-01-03T11:35:03.332867+13:00","closed_at":"2026-01-03T11:35:03.332867+13:00","close_reason":"Closed"}
{"id":"icehouse-22d","title":"ensure warnings and errors do not move the play area or stash areas","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T19:46:25.587951+13:00","created_by":"david","updated_at":"2026-01-10T20:10:52.142884+13:00","closed_at":"2026-01-10T20:10:52.142884+13:00","close_reason":"Closed"}
{"id":"icehouse-26q","title":"Relax id-string schema to allow keywords","description":"In CLJS, 'js-\u003eclj' with ':keywordize-keys true' converts map keys to keywords. 'PlayerMap' uses 'id-string' for keys, which is currently strict ':string', causing validation failures for incoming messages. Relax 'id-string' to '[:or :string :keyword]'.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-08T20:32:05.102447+13:00","created_by":"david","updated_at":"2026-01-08T20:34:11.261828+13:00","closed_at":"2026-01-08T20:34:11.261828+13:00","close_reason":"Closed"}
{"id":"icehouse-2bh","title":"Extract check-placement-throttle! helper function","description":"Throttle check logic is repeated 3+ times in game.cljs (lines 575-597, 605-625, 640-658) with identical pattern: get throttle-sec from options, calculate time-since-last, check if can-place?. Extract to a single utility function.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-10T20:51:31.4961+13:00","created_by":"david","updated_at":"2026-01-10T20:51:31.4961+13:00"}
{"id":"icehouse-2bq","title":"more malli","description":"look for more places to enfore malli schemas as function pre or post conditions. Only do so when it makes sense","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T11:05:07.806103+13:00","created_by":"david","updated_at":"2026-01-09T12:51:29.444585+13:00","closed_at":"2026-01-09T12:51:29.444585+13:00","close_reason":"Closed"}
{"id":"icehouse-2cq","title":"fix: end game button not working due to contains? on vector","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-10T08:53:23.325831+13:00","created_by":"david","updated_at":"2026-01-10T08:53:30.246376+13:00","closed_at":"2026-01-10T08:53:30.246376+13:00","close_reason":"Closed"}
{"id":"icehouse-2kc","title":"when zoomed dragging the piece with the shift key pressed is moving the entire view","description":"without shift key pressed it is not changing the piece angle","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T21:45:31.145314+13:00","created_by":"david","updated_at":"2026-01-02T21:46:09.410441+13:00","closed_at":"2026-01-02T21:46:09.410441+13:00","close_reason":"Closed"}
{"id":"icehouse-2lh","title":"Extract duplicated game logic to shared .cljc file","description":"calculate-iced-pieces, attackers-by-target, and attack-strength are duplicated between src/clj/icehouse/game.clj (lines 246-289) and src/cljs/icehouse/game.cljs (lines 110-173). Move to src/cljc/icehouse/game-logic.cljc to eliminate duplication and ensure consistency.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-10T20:51:30.622911+13:00","created_by":"david","updated_at":"2026-01-10T20:56:48.919728+13:00","closed_at":"2026-01-10T20:56:48.919728+13:00","close_reason":"Closed"}
{"id":"icehouse-2mv","title":"Split draw-with-preview into smaller functions","description":"draw-with-preview is 82 lines with complex preview rendering, zoom handling, angle calculation, range indicators. Extract: zoom transform logic, preview piece drawing, range visualization.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-04T16:53:26.793795+13:00","created_by":"david","updated_at":"2026-01-04T17:47:43.663139+13:00","closed_at":"2026-01-04T17:47:43.663139+13:00","close_reason":"Closed"}
{"id":"icehouse-2pq","title":"Player pieces on playfield show wrong colour","description":"Pieces placed on the playfield appear in the default grey colour instead of the player's chosen colour. The player's colour is correctly displayed in the stash panel but not applied to pieces on the board.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T18:27:53.742419+13:00","updated_at":"2026-01-01T10:09:19.044835+13:00","closed_at":"2025-12-27T18:34:21.210685+13:00","close_reason":"Closed"}
{"id":"icehouse-2ya","title":"Fix rotation not working when dragging from stash to play area","description":"Neither pressing 'm' nor shift allows rotation when dragging pieces from stash area to play area","status":"closed","priority":3,"issue_type":"bug","created_at":"2026-01-10T10:53:29.812287+13:00","created_by":"david","updated_at":"2026-01-10T11:27:36.068985+13:00","closed_at":"2026-01-10T11:27:36.068989+13:00"}
{"id":"icehouse-2yr","title":"Fix schema validation for JSON collections","description":"Frontend receives JSON arrays for sets (e.g. :finished field) and vectors (e.g. :icehouse-players). Update schemas to be permissive for JSON transport (allow sequential instead of set) or transform data in frontend.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-08T19:52:43.443901+13:00","created_by":"david","updated_at":"2026-01-08T20:02:01.265776+13:00","closed_at":"2026-01-08T20:02:01.265776+13:00","close_reason":"Closed"}
{"id":"icehouse-3fz","title":"Fix enum schema validation for JSON strings","description":"Shared schemas for enums (piece-size, orientation, timer-duration) expect keywords (e.g. :small, :random), but data received over WebSocket (JSON) contains strings (e.g. 'small', 'random'). Update schemas to allow both keywords and strings to support both backend internal state and frontend/wire format.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-08T20:40:24.266164+13:00","created_by":"david","updated_at":"2026-01-08T20:52:35.067935+13:00","closed_at":"2026-01-08T20:52:35.067935+13:00","close_reason":"Closed"}
{"id":"icehouse-3rb","title":"error message moves playfield","description":"the error message for a failed attack should not cause the playfield to move vertically on the screen","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T08:55:42.858556+13:00","updated_at":"2026-01-01T10:09:19.042435+13:00","closed_at":"2025-12-28T09:02:38.273285+13:00","close_reason":"Closed"}
{"id":"icehouse-4i9","title":"show game help","description":"press ? key to show description of hotkey functions","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T22:04:30.696012+13:00","updated_at":"2026-01-01T10:09:19.029415+13:00","closed_at":"2025-12-29T08:56:50.188917+13:00","close_reason":"Closed"}
{"id":"icehouse-4jq","title":"default name in lobby","description":"depending on the number of connections use Alice, Bob, etc.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T09:30:15.885177+13:00","updated_at":"2026-01-01T10:09:19.041743+13:00","closed_at":"2025-12-28T09:35:59.242112+13:00","close_reason":"Closed"}
{"id":"icehouse-4li","title":"players' stash area should not show any captured pieces at the start of the game","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T10:27:55.893279+13:00","updated_at":"2026-01-01T10:09:19.02909+13:00","closed_at":"2025-12-29T10:44:14.389004+13:00","close_reason":"Closed"}
{"id":"icehouse-4m8","title":"an attacking piece can hightlight more than one defender piece","description":"only the nearest defender should be highlighted","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T15:53:02.353349+13:00","created_by":"david","updated_at":"2026-01-04T15:59:31.540375+13:00","closed_at":"2026-01-04T15:59:31.540375+13:00","close_reason":"Closed"}
{"id":"icehouse-4pi","title":"edit game options in lobby","description":"anybody in the lobby can edit game options before the game starts","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T21:47:14.66796+13:00","updated_at":"2026-01-01T10:09:19.030532+13:00","closed_at":"2025-12-29T09:02:26.635723+13:00","close_reason":"Closed","dependencies":[{"issue_id":"icehouse-4pi","depends_on_id":"icehouse-817","type":"parent-child","created_at":"2025-12-28T21:47:35.071797+13:00","created_by":"daemon"}]}
{"id":"icehouse-50i","title":"Remove duplicate standing?/pointing? from utils.cljc","description":"standing? and pointing? predicates are defined identically in both utils.cljc (lines 42-50) and geometry.cljc (lines 65-73). Keep in geometry.cljc since it's more semantically appropriate and remove from utils.cljc.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-10T20:51:30.905425+13:00","created_by":"david","updated_at":"2026-01-10T20:51:30.905425+13:00"}
{"id":"icehouse-513","title":"update readme file with instructions on how to run app from command line","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T14:50:47.430076+13:00","updated_at":"2026-01-01T10:09:19.03557+13:00","closed_at":"2025-12-28T19:48:13.005773+13:00","close_reason":"Closed"}
{"id":"icehouse-5a3","title":"in the player's area captured pieces should have a 4 next to them (the hotkey)","description":"when multiple types of pieces are captured use 5, 6, etc","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T16:57:58.545112+13:00","created_by":"david","updated_at":"2026-01-09T17:06:46.215427+13:00","closed_at":"2026-01-09T17:06:46.215427+13:00","close_reason":"Closed"}
{"id":"icehouse-5co","title":"different error to player if attack is not pointed at enemy piece at all, regardless of range","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T11:06:28.820413+13:00","updated_at":"2026-01-01T10:09:19.039032+13:00","closed_at":"2025-12-28T11:13:33.064848+13:00","close_reason":"Closed"}
{"id":"icehouse-5iq","title":"End game button missing while playing","description":"User reported that no end game button appears while playing. Investigate visibility/existence of Finish button or need for Abort button.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-04T19:45:34.411184+13:00","created_by":"david","updated_at":"2026-01-04T20:13:38.356484+13:00","closed_at":"2026-01-04T20:13:38.356484+13:00","close_reason":"Closed"}
{"id":"icehouse-5qm","title":"Add null/nil safety checks for unsafe field access","description":"Codebase frequently accesses nested map fields without validation:\n- Direct math operations on potentially nil coordinates (game.clj:182-183)\n- Keyword conversions without nil checks (game.cljs:180)\n- JSON parse results used directly without structure validation (websocket.cljs:19-20)\n- File path construction from unvalidated game-id (storage.clj:21)\n\nShould add guards and early returns for invalid/missing data to prevent runtime errors.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-30T20:52:41.98668+13:00","updated_at":"2026-01-01T10:09:19.02671+13:00","closed_at":"2025-12-30T21:57:25.201593+13:00","close_reason":"Closed"}
{"id":"icehouse-5rh","title":"on the replay page the winner is a number not a name","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-04T21:02:44.40945+13:00","created_by":"david","updated_at":"2026-01-04T21:03:44.974759+13:00","closed_at":"2026-01-04T21:03:44.974759+13:00","close_reason":"Closed"}
{"id":"icehouse-5xq","title":"Placing pieces at an angle","description":"Pieces can be placed attacking and defending at any angle. First click to choose a starting point, then drag and release to select the direction.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T13:43:01.069048+13:00","updated_at":"2026-01-01T10:09:19.046446+13:00","closed_at":"2025-12-27T18:34:39.918623+13:00","close_reason":"Already implemented - drag-to-aim functionality is working"}
{"id":"icehouse-5zv","title":"Add null check before handle-post-placement!","description":"In game.clj handle-place-piece (lines 532-545), if apply-placement! returns but find-piece-by-id returns nil, handle-post-placement! still gets called with nil piece. Add defensive check.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-10T20:51:33.457122+13:00","created_by":"david","updated_at":"2026-01-10T20:51:33.457122+13:00"}
{"id":"icehouse-6ao","title":"Add frontend (ClojureScript) test suite","description":"No ClojureScript tests currently exist. Backend has comprehensive tests in test/clj/, but frontend (src/cljs/) has no corresponding tests for:\n- Game logic utilities (piece-vertices, collision detection, etc)\n- State management functions\n- UI component logic\n- Event handlers\n\nShould set up ClojureScript testing framework (cljs-test or similar) and add tests for critical frontend functions.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T20:53:45.345613+13:00","updated_at":"2026-01-09T09:18:38.957562+13:00","closed_at":"2026-01-09T09:18:38.957562+13:00","close_reason":"Closed","comments":[{"id":2,"issue_id":"icehouse-6ao","author":"david","text":"Implementation Plan:\n1. Avoid installing new NPM packages. Use the existing environment.\n2. Configure a browser-based test runner in 'shadow-cljs.edn'.\n   - Add a :test build configuration targeting :browser.\n   - Output to 'resources/public/js/test.js'.\n3. Create a test runner namespace 'test/cljs/icehouse/runner.cljs' that uses 'cljs.test' to find and run tests.\n4. Create 'resources/public/test.html' to host the test runner.\n5. Port geometry logic tests and add new frontend state tests in 'test/cljs/'.","created_at":"2026-01-08T18:29:57Z"}]}
{"id":"icehouse-6b3","title":"Cancel piece placement with Escape key","description":"When dragging a piece to set its angle, pressing Escape should cancel the placement and return the piece to the stash.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T09:22:42.959459+13:00","updated_at":"2026-01-01T10:09:19.02424+13:00","closed_at":"2025-12-28T09:24:22.703375+13:00","close_reason":"Closed"}
{"id":"icehouse-6gr","title":"allow size change during drag","description":"during dragging it should be possible to press 1, 2, or 3 to update the piece size","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T10:12:13.765658+13:00","updated_at":"2026-01-01T10:09:19.041047+13:00","closed_at":"2025-12-28T10:19:54.588837+13:00","close_reason":"Closed"}
{"id":"icehouse-7hz","title":"game end button","description":"create a button on the play screen that will end the game when all players have pressed it. then scores are calculated and displayed","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T09:07:50.734455+13:00","created_by":"david","updated_at":"2026-01-04T15:54:31.560641+13:00","closed_at":"2026-01-04T15:54:31.560641+13:00","close_reason":"Closed"}
{"id":"icehouse-7vc","title":"Don't allow playfield to move","description":"If the available pieces changes, do not allow the size of the player's area to change, ensuring that the playfield does not move","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T14:59:23.200499+13:00","updated_at":"2026-01-01T10:09:19.045145+13:00","closed_at":"2025-12-27T18:36:16.781135+13:00","close_reason":"Closed"}
{"id":"icehouse-817","title":"game options","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-28T21:44:15.062942+13:00","updated_at":"2026-01-01T10:09:19.031321+13:00","closed_at":"2025-12-29T09:02:26.403663+13:00","close_reason":"Closed"}
{"id":"icehouse-81a","title":"captured pieces can be selected for playing","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T13:05:17.921134+13:00","updated_at":"2026-01-01T10:09:19.037957+13:00","closed_at":"2025-12-28T13:09:43.894255+13:00","close_reason":"Closed"}
{"id":"icehouse-83k","title":"Enforce Malli schema validations","description":"Incrementally enforce Malli schema validations across the application to ensure data integrity and type safety.","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-08T17:46:42.949377+13:00","created_by":"david","updated_at":"2026-01-08T17:58:30.814239+13:00","closed_at":"2026-01-08T17:58:30.814239+13:00","close_reason":"Closed"}
{"id":"icehouse-83k.1","title":"Enforce input validation for WebSocket messages","description":"In 'src/clj/icehouse/server.clj', validate all incoming messages against 'icehouse.schema/ClientMessage' before processing. Reject invalid messages with an error response.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T17:46:55.257755+13:00","created_by":"david","updated_at":"2026-01-08T17:51:33.729181+13:00","closed_at":"2026-01-08T17:51:33.729181+13:00","close_reason":"Closed","dependencies":[{"issue_id":"icehouse-83k.1","depends_on_id":"icehouse-83k","type":"parent-child","created_at":"2026-01-08T17:46:55.259146+13:00","created_by":"david"}]}
{"id":"icehouse-83k.2","title":"Enforce output validation for WebSocket messages","description":"In 'src/clj/icehouse/utils.cljc' or 'server.clj', enforce 'icehouse.schema/ServerMessage' validation for all outgoing messages. Ensure that invalid messages are logged as errors and potentially blocked in non-production environments.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T17:47:06.909489+13:00","created_by":"david","updated_at":"2026-01-08T17:53:13.93868+13:00","closed_at":"2026-01-08T17:53:13.93868+13:00","close_reason":"Closed","dependencies":[{"issue_id":"icehouse-83k.2","depends_on_id":"icehouse-83k","type":"parent-child","created_at":"2026-01-08T17:47:06.911288+13:00","created_by":"david"}]}
{"id":"icehouse-83k.3","title":"Enforce GameState validation on updates","description":"In 'src/clj/icehouse/game.clj', ensure that every state transition (move, join, etc.) results in a valid 'icehouse.schema/GameState'. Add validation checks after state updates.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T17:47:18.515298+13:00","created_by":"david","updated_at":"2026-01-08T17:54:54.670567+13:00","closed_at":"2026-01-08T17:54:54.670567+13:00","close_reason":"Closed","dependencies":[{"issue_id":"icehouse-83k.3","depends_on_id":"icehouse-83k","type":"parent-child","created_at":"2026-01-08T17:47:18.516492+13:00","created_by":"david"}]}
{"id":"icehouse-83k.4","title":"Enforce frontend UIState validation","description":"In 'src/cljs/icehouse/state.cljs', add schema validation for the UI state atom. Ensure that interactions like piece selection and dragging maintain valid state.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-08T17:47:29.463557+13:00","created_by":"david","updated_at":"2026-01-08T17:56:25.285482+13:00","closed_at":"2026-01-08T17:56:25.285482+13:00","close_reason":"Closed","dependencies":[{"issue_id":"icehouse-83k.4","depends_on_id":"icehouse-83k","type":"parent-child","created_at":"2026-01-08T17:47:29.464696+13:00","created_by":"david"}]}
{"id":"icehouse-83k.5","title":"Enforce ReplayState and Storage validation","description":"Ensure that saved game records and replay state conform to their respective schemas ('GameState' and 'ReplayState'). Validate data on load and save.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-08T17:47:40.343544+13:00","created_by":"david","updated_at":"2026-01-08T17:58:20.820604+13:00","closed_at":"2026-01-08T17:58:20.820604+13:00","close_reason":"Closed","dependencies":[{"issue_id":"icehouse-83k.5","depends_on_id":"icehouse-83k","type":"parent-child","created_at":"2026-01-08T17:47:40.344435+13:00","created_by":"david"}]}
{"id":"icehouse-83v","title":"do not use a bounding box to detect colliding pieces","description":"use precise geometric calculations","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T16:23:48.495044+13:00","created_by":"david","updated_at":"2026-01-04T16:24:24.727697+13:00","closed_at":"2026-01-04T16:24:24.727697+13:00","close_reason":"Closed"}
{"id":"icehouse-84l","title":"when a piece is placed re-do all success/fail calculations and update any changes","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T17:27:17.174513+13:00","updated_at":"2026-01-04T17:59:41.514867+13:00","closed_at":"2026-01-04T17:59:41.514867+13:00","close_reason":"Closed"}
{"id":"icehouse-854","title":"place captured piece","description":"a captured piece can be placed, it must be placed consistent with rules for it's player colour, so if attacking it must attack a defending piece of a different colour","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T09:04:19.917006+13:00","created_by":"david","updated_at":"2026-01-04T09:33:16.084419+13:00","closed_at":"2026-01-04T09:33:16.084419+13:00","close_reason":"Closed","dependencies":[{"issue_id":"icehouse-854","depends_on_id":"icehouse-te8","type":"parent-child","created_at":"2026-01-04T09:04:41.683137+13:00","created_by":"david"}]}
{"id":"icehouse-894","title":"player should get a warning when moving too quickly","description":"if the move throttle prevents a player starting a move there a warning should be briefly displayed daying how long is left before they can make another move","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T09:04:37.957318+13:00","created_by":"david","updated_at":"2026-01-10T09:41:31.774264+13:00","closed_at":"2026-01-10T09:41:31.774264+13:00","close_reason":"Closed"}
{"id":"icehouse-8ew","title":"Extract magic color values into named constants","description":"Multiple magic color hex values are hardcoded throughout the UI:\n- #ffd700 (gold) for captured pieces - appears 5+ times\n- #2a2a3e (dark) for board background - appears 2+ times\n- #3a3a4e (grid color) - appears once\n- #4CAF50 (green) for buttons - appears 3+ times\n- #f44336 (red) for error/urgent states - appears 2+ times\n\nShould define these as named constants in a theme/color constants module for consistency and easier maintenance.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-30T20:53:09.158659+13:00","updated_at":"2026-01-01T10:09:19.05118+13:00","closed_at":"2025-12-30T21:30:05.557771+13:00","close_reason":"Closed"}
{"id":"icehouse-8h9","title":"Capturing hotkey","description":"When hovering over an enemy piece that can be captured pressing c will capture it","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T13:03:29.619867+13:00","updated_at":"2026-01-01T10:09:19.038635+13:00","closed_at":"2025-12-28T13:55:07.220206+13:00","close_reason":"Closed","dependencies":[{"issue_id":"icehouse-8h9","depends_on_id":"icehouse-b9j","type":"blocks","created_at":"2025-12-28T13:04:05.886564+13:00","created_by":"daemon"}]}
{"id":"icehouse-8hu","title":"holding the shift key while playing a piece adjusts its position rather than rotation","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T14:17:09.186281+13:00","updated_at":"2026-01-01T10:09:19.03656+13:00","closed_at":"2025-12-28T14:44:14.40679+13:00","close_reason":"Closed"}
{"id":"icehouse-8zp","title":"increase playfield size by 25% both height and width","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T19:31:27.724882+13:00","updated_at":"2026-01-01T10:09:19.035235+13:00","closed_at":"2025-12-28T19:58:21.636489+13:00","close_reason":"Closed"}
{"id":"icehouse-90z","title":"captured pieces can be playede","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T13:05:47.413325+13:00","updated_at":"2026-01-01T10:09:19.037607+13:00","closed_at":"2025-12-28T13:11:30.936278+13:00","close_reason":"Closed"}
{"id":"icehouse-91n","title":"move throttle setting in lobby","description":"a settle that can be changed in the lobby is a cooldown period after a piece is placed before the player can start placing the next piece. default to one second, allow real numbers","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T20:05:38.997682+13:00","created_by":"david","updated_at":"2026-01-09T20:35:00.813419+13:00","closed_at":"2026-01-09T20:35:00.813419+13:00","close_reason":"Closed"}
{"id":"icehouse-953","title":"Unplayed pieces should be visible for each player next to the board play area","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T21:13:49.332325+13:00","updated_at":"2026-01-01T10:09:19.05024+13:00","closed_at":"2025-12-27T12:00:46.024394+13:00","close_reason":"Closed","comments":[{"id":1,"issue_id":"icehouse-953","author":"david","text":"Mockup created at .beads/mockups/claudecode-953-stash-display.md - Shows player stash panels positioned on left/right of game board","created_at":"2025-12-26T08:18:55Z"}]}
{"id":"icehouse-9a0","title":"each player should see their own stash area in the top left","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T20:48:10.370339+13:00","created_by":"david","updated_at":"2026-01-09T20:49:08.104654+13:00","closed_at":"2026-01-09T20:49:08.104654+13:00","close_reason":"Closed"}
{"id":"icehouse-9fr","title":"Attacks can only target defending (standing) pieces","description":"Per official Icehouse rules, attacking pieces can only point at opponent's DEFENDING pieces (standing upright), not at other attacking pieces.\n\nCurrent implementation allows targeting any opponent piece regardless of orientation.\n\nFix: Add check in valid-target? that target must have orientation :standing","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T19:31:40.453516+13:00","updated_at":"2026-01-01T10:09:19.044052+13:00","closed_at":"2025-12-28T09:36:44.990642+13:00","close_reason":"Closed","dependencies":[{"issue_id":"icehouse-9fr","depends_on_id":"icehouse-l3a","type":"blocks","created_at":"2025-12-28T08:43:02.02923+13:00","created_by":"daemon"}]}
{"id":"icehouse-9j1","title":"when placing a piece with zoom mode enabled the movement amount should be scaled down appropriately","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-01T15:02:09.426831+13:00","updated_at":"2026-01-02T21:34:52.789629+13:00","closed_at":"2026-01-02T21:34:52.789629+13:00","close_reason":"Closed"}
{"id":"icehouse-9qe","title":"Add sound effects for piece placement and capture","description":"Add audio feedback for game actions:\n- Sound when placing a piece on the board\n- Sound when capturing an enemy piece\n- Consider different sounds for different piece sizes or a satisfying 'click' for placement and 'swoosh' for capture","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-09T17:28:56.292421+13:00","created_by":"david","updated_at":"2026-01-09T17:28:56.292421+13:00"}
{"id":"icehouse-9rf","title":"line during dragging an attack should show the valid attack distance","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T10:39:17.867342+13:00","updated_at":"2026-01-01T10:09:19.040043+13:00","closed_at":"2025-12-28T11:29:59.370108+13:00","close_reason":"Closed"}
{"id":"icehouse-9ss","title":"Split handle-place-piece into smaller functions","description":"handle-place-piece is 66 lines handling piece placement, validation, board update, move recording, game-over detection, and broadcasting. Split into: piece construction, validation, placement, effects.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-04T16:53:19.54269+13:00","created_by":"david","updated_at":"2026-01-04T17:42:36.000029+13:00","closed_at":"2026-01-04T17:42:36.000029+13:00","close_reason":"Closed"}
{"id":"icehouse-a8b","title":"Disallow placing pieces that intersect other pieces","description":"When placing a piece, check if it would overlap or intersect with any existing piece on the playing field. If so, reject the placement and show feedback to the player.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T13:43:46.082721+13:00","updated_at":"2026-01-01T10:09:19.046135+13:00","closed_at":"2025-12-27T14:46:17.498786+13:00","close_reason":"Closed"}
{"id":"icehouse-asm","title":"in the stash area show small in the top line, then medium, then large","description":"show the digits 1, 2, 3 for the hotkeys","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T20:49:44.065806+13:00","created_by":"david","updated_at":"2026-01-09T21:03:58.749377+13:00","closed_at":"2026-01-09T21:03:58.749377+13:00","close_reason":"Closed"}
{"id":"icehouse-b56","title":"the replay button should only appear after the game has finished","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T15:54:22.453956+13:00","created_by":"david","updated_at":"2026-01-04T18:36:54.465972+13:00","closed_at":"2026-01-04T18:36:54.465972+13:00","close_reason":"Closed"}
{"id":"icehouse-b8j","title":"zoom mode for fine placement","description":"during piece placement a hotkey should allow for zooming the view by a factor of 4 to allow precise placement. The view should restore to normal as soon as the piece is placed or the hotkey is clicked again. Use z for the hotkey","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T17:45:19.792451+13:00","updated_at":"2026-01-01T10:09:19.027432+13:00","closed_at":"2025-12-29T17:50:56.84367+13:00","close_reason":"Closed"}
{"id":"icehouse-b9j","title":"Capturing","description":"All aspects of capturing","status":"closed","priority":3,"issue_type":"epic","created_at":"2025-12-28T13:02:12.071616+13:00","updated_at":"2026-01-01T10:09:19.051759+13:00","closed_at":"2025-12-28T19:48:33.036018+13:00","close_reason":"Closed"}
{"id":"icehouse-b9r","title":"add button to end game and show scores and winner","description":"during gameplay if all player press the finish button the game is scored","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-01T11:10:58.669401+13:00","created_by":"david","updated_at":"2026-01-01T11:32:58.440581+13:00","closed_at":"2026-01-01T11:32:58.440581+13:00","close_reason":"Closed"}
{"id":"icehouse-bad","title":"Pieces should be twice as large","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T12:02:31.889648+13:00","updated_at":"2026-01-01T10:09:19.049939+13:00","closed_at":"2025-12-27T12:05:02.345773+13:00","close_reason":"Closed"}
{"id":"icehouse-bct","title":"play area should be more compact","description":"show a count of each piece type","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T19:43:38.618279+13:00","updated_at":"2026-01-01T10:09:19.034254+13:00","closed_at":"2025-12-28T19:58:21.896144+13:00","close_reason":"Closed"}
{"id":"icehouse-blz","title":"end game should show player scores","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T20:20:12.4123+13:00","updated_at":"2026-01-04T20:26:12.569984+13:00","closed_at":"2026-01-04T20:26:12.569984+13:00","close_reason":"Closed"}
{"id":"icehouse-bng","title":"Optimize iced pieces calculation - cache result or optimize algorithm","description":"calculate-iced-pieces is called every frame in draw-board (during canvas rendering). This function iterates through all board pieces and attackers for each piece, making it O(n^2) in complexity. Should either:\n1. Cache the result in game state when board changes\n2. Optimize the calculation algorithm\n3. Only recalculate when board actually changes rather than every frame","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T20:53:14.869873+13:00","updated_at":"2026-01-01T10:09:19.02637+13:00","closed_at":"2025-12-31T08:28:40.3958+13:00","close_reason":"Closed"}
{"id":"icehouse-bz5","title":"Implement icing calculation (attackers must exceed defender value)","description":"Per official Icehouse rules, an attack only succeeds (ices the defender) when the combined pip value of all attacking pieces pointing at a defender EXCEEDS the defender's value.\n\nPip values: Small=1, Medium=2, Large=3\n\nExample: To ice a Large (3 pips), need 4+ pips of attackers pointing at it.\n\nCurrently not implemented - we validate attack placement but don't calculate whether defenders are actually iced.\n\nImplementation needed:\n1. Track which attackers point at which defenders\n2. Sum attacker pip values per defender\n3. Mark defenders as 'iced' when sum \u003e defender value\n4. Iced pieces don't score points at game end","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T19:31:50.598157+13:00","updated_at":"2026-01-01T10:09:19.043638+13:00","closed_at":"2025-12-28T09:38:42.880898+13:00","close_reason":"Closed","dependencies":[{"issue_id":"icehouse-bz5","depends_on_id":"icehouse-l3a","type":"blocks","created_at":"2025-12-28T08:34:32.625164+13:00","created_by":"daemon"}]}
{"id":"icehouse-c7y","title":"sometimes when dragging from the stash the piece does not drag on the play area","description":"possibly the dragging flag is not set, so always set it","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-09T20:54:20.894206+13:00","created_by":"david","updated_at":"2026-01-09T21:02:32.978317+13:00","closed_at":"2026-01-09T21:02:32.978317+13:00","close_reason":"Closed"}
{"id":"icehouse-chn","title":"sometimes it placing new pieces fails, the piece does not appear when the mouse is clicked","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T11:59:27.426567+13:00","updated_at":"2026-01-03T12:03:45.053026+13:00","closed_at":"2026-01-03T12:03:45.053026+13:00","close_reason":"Added visual feedback - size shows red [NONE] when unavailable"}
{"id":"icehouse-cvx","title":"when z is pressed zooming is not happening properly","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T21:56:15.850468+13:00","created_by":"david","updated_at":"2026-01-02T21:56:56.298135+13:00","closed_at":"2026-01-02T21:56:56.298135+13:00","close_reason":"Closed"}
{"id":"icehouse-d0g","title":"when placing a piece and them zooming, the piece being placed does not appear","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T11:37:34.036717+13:00","updated_at":"2026-01-03T11:40:43.550948+13:00","closed_at":"2026-01-03T11:40:43.550948+13:00","close_reason":"Closed"}
{"id":"icehouse-d6p","title":"Refactor handle-message condp chain to handler map","description":"handle-message in websocket.cljs (lines 55-122) is a 70+ line condp chain handling all message types. Refactor to use a map of message-type to handler functions for better maintainability.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-10T20:51:32.92096+13:00","created_by":"david","updated_at":"2026-01-10T20:51:32.92096+13:00"}
{"id":"icehouse-dd9","title":"Implement over-icing rule (capture redundant attackers)","description":"Per official Icehouse rules, when a defender is 'over-iced' (more attack pips than needed), the defender's owner can capture the redundant attack pieces.\n\nExample: Large defender (3 pips) targeted by 2 Large attackers (6 pips total). Only 4 pips needed to ice, so 2 pips are redundant - defender's owner can capture one small or the excess value.\n\nThis rule punishes wasteful/greedy attacks.\n\nDepends on: claudecode-bz5 (icing calculation)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T19:31:59.452564+13:00","updated_at":"2026-01-01T10:09:19.043233+13:00","closed_at":"2025-12-28T11:32:53.349414+13:00","close_reason":"Closed","dependencies":[{"issue_id":"icehouse-dd9","depends_on_id":"icehouse-bz5","type":"blocks","created_at":"2025-12-28T08:33:09.281855+13:00","created_by":"daemon"}]}
{"id":"icehouse-di9","title":"attacking should only succeed when no pieces in between","description":"when an attacking piece for player 1 points to an enemy defender and the range is good the attack should fail if any other attacking pieces (or defending pieces of player 1) are in between. In other words the very first piece that is in sight along the line of attack must be the enemy defending piece","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T11:47:33.146772+13:00","updated_at":"2026-01-01T10:09:19.028099+13:00","closed_at":"2025-12-29T13:08:36.105169+13:00","close_reason":"Closed"}
{"id":"icehouse-dvv","title":"placing a piece while zoomed can result in \"invalid message format\"","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T21:49:26.871278+13:00","updated_at":"2026-01-02T21:50:14.533927+13:00","closed_at":"2026-01-02T21:50:14.533927+13:00","close_reason":"Closed"}
{"id":"icehouse-ea1","title":"after attacking sometimes the defending piece is a different colour (slightly lighter)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T11:53:58.247+13:00","created_by":"david","updated_at":"2026-01-03T11:54:44.923216+13:00","closed_at":"2026-01-03T11:54:44.923216+13:00","close_reason":"Not a bug - iced pieces are intentionally lightened"}
{"id":"icehouse-ec4","title":"Fix websocket message validation to block invalid messages","description":"In websocket.cljs (lines 47-53), invalid outgoing messages are warned but sent anyway. The validation should actually block sending invalid messages or throw an error instead of just logging a warning.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-10T20:51:32.65609+13:00","created_by":"david","updated_at":"2026-01-10T20:51:32.65609+13:00"}
{"id":"icehouse-eh5","title":"Refactor calculate-iced-pieces and calculate-over-ice","description":"These two functions have 90% identical structure: get attacks, reduce-kv over targets, calculate pips. Extract common attack calculation logic into a shared helper function.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-04T16:53:00.107116+13:00","created_by":"david","updated_at":"2026-01-04T17:24:37.820164+13:00","closed_at":"2026-01-04T17:24:37.820164+13:00","close_reason":"Closed"}
{"id":"icehouse-eja","title":"Extract zoom coordinate adjustment helper","description":"Mouse coordinate adjustment for zoom is repeated in game.cljs at lines 583-586, 612-614, and 632-635. Create an adjust-coords-for-zoom helper function to consolidate this logic.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-10T20:51:31.797477+13:00","created_by":"david","updated_at":"2026-01-10T20:51:31.797477+13:00"}
{"id":"icehouse-ejb","title":"drag and drop pieces","description":"pieces should be draggable from the player stash areas onto the board. only allow a player to drag from their own stash area","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T20:04:23.929789+13:00","created_by":"david","updated_at":"2026-01-09T20:11:25.965942+13:00","closed_at":"2026-01-09T20:11:25.965942+13:00","close_reason":"Closed"}
{"id":"icehouse-exo","title":"Consolidate scattered game state atoms into structured state map","description":"Frontend state (state.cljs) has 14+ individual atoms scattered throughout:\n- game-state, drag-state, selected-piece, hover-pos, zoom-active\n- game-result, replay-state, game-options\n- player-id, room-id, player-name, player-colour, players, player-list\n- error-message, ws-status, show-help, current-time\n\nThis fragmentation makes state management harder to reason about and can lead to inconsistency. Should consolidate into a single structured state atom with a clear data model.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-30T20:53:36.598053+13:00","updated_at":"2026-01-01T10:20:15.965312+13:00","closed_at":"2026-01-01T10:20:15.965312+13:00","close_reason":"Closed"}
{"id":"icehouse-f2n","title":"set default move throttle time to two seconds","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T09:03:05.324446+13:00","updated_at":"2026-01-10T10:20:30.45895+13:00","closed_at":"2026-01-10T10:20:30.45895+13:00","close_reason":"Closed"}
{"id":"icehouse-fed","title":"third name should be Charles","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T10:47:37.543697+13:00","updated_at":"2026-01-01T10:09:19.039712+13:00","closed_at":"2025-12-28T11:18:33.274549+13:00","close_reason":"Closed"}
{"id":"icehouse-fm5","title":"highlight overlaps during placement","description":"if a piece being placed starts or is dragged or rotated into conflict with an existing piece then this should be highlighted","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T17:38:03.747139+13:00","created_by":"david","updated_at":"2026-01-09T17:42:24.103156+13:00","closed_at":"2026-01-09T17:42:24.103156+13:00","close_reason":"Closed"}
{"id":"icehouse-fmq","title":"Create shared geometry.cljc module","description":"Extract duplicated geometric functions (rotate-point, piece-vertices, within-range?, attack-direction, attacker-tip, point-to-segment-distance, etc.) into a shared .cljc module that can be used by both backend and frontend. This eliminates ~200 lines of duplication and ensures the calculations stay in sync.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T16:52:24.502901+13:00","created_by":"david","updated_at":"2026-01-05T07:16:24.282168+13:00","closed_at":"2026-01-05T07:16:24.282168+13:00","close_reason":"Closed"}
{"id":"icehouse-fth","title":"select captured piece to play","description":"use hotkey 4 for captured piece, 5 if there is a second kind of captured piece, etc.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T09:01:54.567541+13:00","created_by":"david","updated_at":"2026-01-04T09:24:11.913466+13:00","closed_at":"2026-01-04T09:24:11.913466+13:00","close_reason":"Closed","dependencies":[{"issue_id":"icehouse-fth","depends_on_id":"icehouse-te8","type":"parent-child","created_at":"2026-01-04T09:02:16.751201+13:00","created_by":"david"}]}
{"id":"icehouse-gaw","title":"Cache calculate-over-ice like iced-pieces","description":"calculate-over-ice is computed every time capturable-piece? is called (during hover and rendering) in game.cljs. Should be cached and updated on board changes like iced-pieces already is.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-10T20:51:33.190716+13:00","created_by":"david","updated_at":"2026-01-10T20:51:33.190716+13:00"}
{"id":"icehouse-gb6","title":"Add error handling to WebSocket message parsing","description":"websocket.clj line 11 has no error handling for JSON parsing:\n- json/parse-string can throw if data is invalid JSON\n- No try-catch or error recovery\n- Client would be left in undefined state after bad message\n- Unknown message types log silently without notifying client\n\nShould:\n- Wrap parse-string in try-catch\n- Send error response for malformed JSON\n- Log parse errors for debugging\n- Handle case where msg-type is missing","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-30T20:54:11.011933+13:00","updated_at":"2026-01-01T10:09:19.02503+13:00","closed_at":"2025-12-31T08:33:04.091575+13:00","close_reason":"Closed"}
{"id":"icehouse-ghn","title":"allow game replay","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T20:32:17.539589+13:00","updated_at":"2026-01-01T10:09:19.033102+13:00","closed_at":"2025-12-28T21:05:00.722002+13:00","close_reason":"Closed","dependencies":[{"issue_id":"icehouse-ghn","depends_on_id":"icehouse-s5c","type":"parent-child","created_at":"2025-12-28T20:33:55.148958+13:00","created_by":"daemon"}]}
{"id":"icehouse-h10","title":"display a warning to the player if websocket not connected","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T11:03:01.868729+13:00","updated_at":"2026-01-01T10:09:19.039375+13:00","closed_at":"2025-12-28T11:19:25.760028+13:00","close_reason":"Closed"}
{"id":"icehouse-h21","title":"Add orientation helper predicates","description":"Create standing? and pointing? helper functions to standardize orientation checks. Currently some places use (= orientation :standing) and others use (= (keyword orientation) :standing). Helpers would ensure consistent keyword conversion.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-04T16:52:43.139169+13:00","created_by":"david","updated_at":"2026-01-04T17:53:47.908557+13:00","closed_at":"2026-01-04T17:53:47.908557+13:00","close_reason":"Closed"}
{"id":"icehouse-i2m","title":"choose default colour","description":"if the user does not choose a colour make sure the next available colour is used. Currently the pieces start gray instead of red for the first player","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T09:32:17.945007+13:00","updated_at":"2026-01-01T10:09:19.041396+13:00","closed_at":"2025-12-28T09:35:59.477329+13:00","close_reason":"Closed"}
{"id":"icehouse-i5l","title":"during replay no pieces are rendered","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T20:20:30.069637+13:00","updated_at":"2026-01-04T20:35:27.681125+13:00","closed_at":"2026-01-04T20:35:27.681125+13:00","close_reason":"Closed"}
{"id":"icehouse-jay","title":"overlap detection incorrect","description":"overlap highlighting is bad. if a defensive piece was placed rotated at 45 degrees then placing another piece over the corner is not detected. it seems the overlap may be checked against a non-rotated piece","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-09T18:06:25.394394+13:00","created_by":"david","updated_at":"2026-01-09T18:07:41.636001+13:00","closed_at":"2026-01-09T18:07:41.636001+13:00","close_reason":"Closed"}
{"id":"icehouse-jc7","title":"Improve error handling in game state mutations","description":"When validate-game-state fails in game.clj (lines 494-498, 598-602, 658-660), functions silently return unchanged state with println. No way to report back to user. Consider throwing exceptions or returning error tuples instead of silent failures.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-10T20:51:32.389044+13:00","created_by":"david","updated_at":"2026-01-10T20:51:32.389044+13:00"}
{"id":"icehouse-k50","title":"save moves and times to game record","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T20:32:00.502494+13:00","updated_at":"2026-01-01T10:09:19.03348+13:00","closed_at":"2025-12-28T21:04:29.640071+13:00","close_reason":"Closed","dependencies":[{"issue_id":"icehouse-k50","depends_on_id":"icehouse-s5c","type":"parent-child","created_at":"2025-12-28T20:33:33.964512+13:00","created_by":"daemon"}]}
{"id":"icehouse-kh6","title":"during first two moves disallow attack","description":"pressing a before the third turn should not switch to attack mode","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T10:23:50.556252+13:00","updated_at":"2026-01-01T10:09:19.040716+13:00","closed_at":"2025-12-28T11:20:15.156304+13:00","close_reason":"Closed"}
{"id":"icehouse-kj2","title":"players must choose unique colours","description":"no two players in the lobby can have the same colour","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T15:19:26.971791+13:00","created_by":"david","updated_at":"2026-01-09T15:36:38.975332+13:00","closed_at":"2026-01-09T15:36:38.975332+13:00","close_reason":"Closed"}
{"id":"icehouse-ku2","title":"when dragging a piece from the stash to the play area you need an extra click","description":"if the large pieces are selected and you want to drag a small piece you need to click on the small pieces, then click again to start a drag. the player should only need a single click to drag","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T09:37:09.054363+13:00","created_by":"david","updated_at":"2026-01-10T09:49:31.772646+13:00","closed_at":"2026-01-10T09:49:31.772646+13:00","close_reason":"Closed","comments":[{"id":3,"issue_id":"icehouse-ku2","author":"david","text":"seems to be working now","created_at":"2026-01-09T20:49:17Z"},{"id":4,"issue_id":"icehouse-ku2","author":"david","text":"seems to be working now","created_at":"2026-01-09T20:49:26Z"}]}
{"id":"icehouse-l3a","title":"Attack direction should be a ray, not a 60 cone","description":"The current implementation uses a 60 cone for attack direction validation (dot product \u003e 0.5). This was an incorrect assumption.\n\nPer official rules, an attacking piece must 'point in an unobstructed fashion' at a defender - meaning a direct ray/line from the attacker's tip to the target piece.\n\nFix: Replace cone check with ray-polygon intersection test. The ray from the attacker's tip in its pointing direction should intersect the target piece's bounds.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T19:32:53.643155+13:00","updated_at":"2026-01-01T10:09:19.042777+13:00","closed_at":"2025-12-28T09:07:02.510392+13:00","close_reason":"Closed"}
{"id":"icehouse-l8a","title":"enforce icehouse rule","description":"checkbox for whether the icehouse rule is enforced\n","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T21:44:55.388651+13:00","updated_at":"2026-01-01T10:09:19.030912+13:00","closed_at":"2025-12-29T09:02:27.119817+13:00","close_reason":"Closed","dependencies":[{"issue_id":"icehouse-l8a","depends_on_id":"icehouse-817","type":"parent-child","created_at":"2025-12-28T21:46:03.259935+13:00","created_by":"daemon"},{"issue_id":"icehouse-l8a","depends_on_id":"icehouse-12e","type":"blocks","created_at":"2025-12-28T22:00:15.595484+13:00","created_by":"daemon"}]}
{"id":"icehouse-lem","title":"Improve schema validation logging with malli explain","description":"Update 'src/cljs/icehouse/websocket.cljs' (and potentially utils.cljc) to use 'malli.core/explain' and print readable error messages when schema validation fails.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T20:21:43.319576+13:00","created_by":"david","updated_at":"2026-01-08T20:26:22.031314+13:00","closed_at":"2026-01-08T20:26:22.031314+13:00","close_reason":"Closed"}
{"id":"icehouse-lza","title":"Standardize captured pieces handling","description":"Multiple places handle captured pieces with slight variations. Create a standard get-captured-piece helper used everywhere for consistency.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-04T16:53:34.291038+13:00","created_by":"david","updated_at":"2026-01-04T18:12:59.821532+13:00","closed_at":"2026-01-04T18:12:59.821532+13:00","close_reason":"Closed"}
{"id":"icehouse-md2","title":"use the traditional looney pyramid stash colours","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T14:48:07.783869+13:00","updated_at":"2026-01-01T10:09:19.036234+13:00","closed_at":"2025-12-28T19:15:48.977102+13:00","close_reason":"Closed"}
{"id":"icehouse-mo6","title":"game option to visually indicate failed pieces","description":"failed pieces should be drawn in a lighter colour","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T16:21:30.485444+13:00","updated_at":"2026-01-01T10:09:19.027778+13:00","closed_at":"2025-12-30T20:50:58.121458+13:00","close_reason":"Closed"}
{"id":"icehouse-n8q","title":"wrong colour after placing piece","description":"the piece colour is correct when the piece is being positioned on the playfield, but always becomes gray after the piece is placed","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T08:57:55.864799+13:00","updated_at":"2026-01-01T10:09:19.042074+13:00","closed_at":"2025-12-28T09:04:40.551524+13:00","close_reason":"Closed"}
{"id":"icehouse-o5h","title":"Create filter helper functions","description":"Create helpers for repeated filter patterns: by-size, by-id, by-player-id. Multiple places use filter #(= (:size %) size) and similar patterns.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-04T16:53:09.792473+13:00","created_by":"david","updated_at":"2026-01-04T17:32:56.994934+13:00","closed_at":"2026-01-04T17:32:56.994934+13:00","close_reason":"Closed"}
{"id":"icehouse-p73","title":"attacking pieces incorrectly prevented for intersecting","description":"an attacking piece with a small gap to the defensive piece was not allowed, with the error message about intersecting an existing piece. there was a gap, so it should have been allowed. Attacking from a little further back was allowed","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-28T19:42:04.3491+13:00","updated_at":"2026-01-01T10:09:19.034901+13:00","closed_at":"2025-12-28T19:45:43.362749+13:00","close_reason":"Closed"}
{"id":"icehouse-q5t","title":"Extract shared geometry utilities into common module","description":"Significant code duplication exists between backend and frontend:\n- rotate-point, piece-vertices, polygon-axes, project-polygon\n- edge-normal, polygons-intersect?\n- attack-direction, attacker-tip\n\nThese pure math functions are duplicated across src/clj/icehouse/game.clj and src/cljs/icehouse/game.cljs. Should extract into a shared module or utility file to reduce duplication and maintenance burden.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-30T20:52:59.667038+13:00","updated_at":"2026-01-05T16:55:28.15201+13:00","closed_at":"2026-01-05T16:55:28.15201+13:00","close_reason":"Duplicate of icehouse-fmq - geometry.cljc module already created"}
{"id":"icehouse-q8x","title":"captured pieces should show in the colour of the captured player","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T14:14:58.087194+13:00","updated_at":"2026-01-01T10:09:19.036905+13:00","closed_at":"2025-12-28T19:15:48.745634+13:00","close_reason":"Closed"}
{"id":"icehouse-qhb","title":"Implement Icehouse rule (instant loss when all defenders iced)","description":"Per official Icehouse rules, if a player has ALL their defenders iced with none remaining un-iced, they are 'put in the Icehouse' - instant loss with a score of zero.\n\nProtection: This can only happen after a player has played at least half their pieces (8+ of 15).\n\nDepends on: claudecode-bz5 (icing calculation)","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-27T19:32:06.392936+13:00","updated_at":"2026-01-01T10:09:19.052406+13:00","closed_at":"2025-12-28T11:34:44.287787+13:00","close_reason":"Closed"}
{"id":"icehouse-qr5","title":"Remove debug println statements from backend","description":"Multiple println statements left in game logic:\n- game.clj:231 in in-front-of?\n- game.clj:315 in potential-target?\n- game.clj:457 in validate-placement\n- lobby.clj:113-115 in ready-toggle\n- websocket.clj:36,40 in connection handlers\n\nThese should be removed or replaced with proper logging for production.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-30T20:52:38.875324+13:00","updated_at":"2026-01-01T10:09:19.027096+13:00","closed_at":"2025-12-30T21:34:30.994357+13:00","close_reason":"Closed"}
{"id":"icehouse-rbb","title":"game replay should have a draggable time slider","description":"dragging the slider updates the moves","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T20:56:56.160151+13:00","created_by":"david","updated_at":"2026-01-04T21:00:16.005543+13:00","closed_at":"2026-01-04T21:00:16.005543+13:00","close_reason":"Closed"}
{"id":"icehouse-rm6","title":"when pressing the shift key to start adjusting the piece position the piece should not jump","description":"when shift is pressed make sure the piece stays where it is, and only update the postion if the mouse moves","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T14:49:34.957659+13:00","updated_at":"2026-01-01T10:09:19.035922+13:00","closed_at":"2025-12-28T19:15:48.518786+13:00","close_reason":"Closed"}
{"id":"icehouse-rz1","title":"pieces in the stash area should show as the pyramid with a number on the inside","description":"don't show five pyramids, show a pyramid with the digit 5 inside. if there are no pyramids available show nothing instead of a 0","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T20:06:43.561381+13:00","created_by":"david","updated_at":"2026-01-09T20:45:20.253219+13:00","closed_at":"2026-01-09T20:45:20.253219+13:00","close_reason":"Closed"}
{"id":"icehouse-s5c","title":"save game record","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-28T20:31:29.785952+13:00","updated_at":"2026-01-01T10:09:19.033884+13:00","closed_at":"2025-12-28T21:05:00.467638+13:00","close_reason":"Closed"}
{"id":"icehouse-s5s","title":"Standardize player-id handling (string vs keyword)","description":"Player IDs are inconsistently handled as strings in some places and keywords in others. Backend player-id-from-channel returns strings, but game state from JSON has keyword keys. Create a normalize-player-id helper and use it consistently everywhere. This has caused multiple bugs.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-04T16:52:33.502419+13:00","created_by":"david","updated_at":"2026-01-04T17:19:15.953414+13:00","closed_at":"2026-01-04T17:19:15.953414+13:00","close_reason":"Closed"}
{"id":"icehouse-s6c","title":"Attacking pieces require valid target within range","description":"Attacking pieces can only be placed if there is a piece of another colour in front of them, no more than two piece-lengths away. This enforces the Icehouse attack rules where pieces must be pointing at a valid target.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T13:45:14.331984+13:00","updated_at":"2026-01-01T10:09:19.045783+13:00","closed_at":"2025-12-27T18:25:22.766686+13:00","close_reason":"Closed"}
{"id":"icehouse-sba","title":"Pieces are not appearing in the playing area when clicked","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T12:15:12.473142+13:00","updated_at":"2026-01-01T10:09:19.049647+13:00","closed_at":"2025-12-27T12:26:18.8907+13:00","close_reason":"Closed"}
{"id":"icehouse-sgg","title":"end game on random timer","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T21:48:18.912974+13:00","updated_at":"2026-01-01T10:09:19.03015+13:00","closed_at":"2025-12-29T09:02:26.877242+13:00","close_reason":"Closed","dependencies":[{"issue_id":"icehouse-sgg","depends_on_id":"icehouse-817","type":"parent-child","created_at":"2025-12-28T21:50:27.432577+13:00","created_by":"daemon"}]}
{"id":"icehouse-sje","title":"Create zoom utility functions with clear names","description":"Coordinate scaling for zoom is error-prone and scattered throughout game.cljs (lines 432-437 and others). Create well-tested utility functions like scale-up-for-zoom and scale-down-for-zoom to centralize this logic.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-10T20:51:33.773103+13:00","created_by":"david","updated_at":"2026-01-10T20:51:33.773103+13:00"}
{"id":"icehouse-t64","title":"Fix schema validation mismatches","description":"Fix schema mismatches causing 'invalid object' errors: 1. PlayersMessage should accept sequences (lists), not just vectors. 2. Move schema should match the actual flat structure used in game.clj, not require a nested :data map.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-08T18:07:18.379118+13:00","created_by":"david","updated_at":"2026-01-08T18:09:55.807371+13:00","closed_at":"2026-01-08T18:09:55.807371+13:00","close_reason":"Closed"}
{"id":"icehouse-te8","title":"play captured pieces","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-04T09:00:28.299426+13:00","created_by":"david","updated_at":"2026-01-04T09:33:39.791854+13:00","closed_at":"2026-01-04T09:33:39.791854+13:00","close_reason":"Closed"}
{"id":"icehouse-tnu","title":"don't allow the player to start placing a piece if there are none of that size remaining","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T10:38:11.135408+13:00","updated_at":"2026-01-01T10:09:19.028782+13:00","closed_at":"2025-12-29T10:44:14.620655+13:00","close_reason":"Closed"}
{"id":"icehouse-tuy","title":"Add Malli schema validation","description":"Introduce Malli schemas for data validation across the codebase. This will provide runtime validation, better error messages, and documentation of data structures.","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-02T11:34:27.229247+13:00","created_by":"david","updated_at":"2026-01-02T21:02:05.78591+13:00","closed_at":"2026-01-02T21:02:05.785913+13:00"}
{"id":"icehouse-tuy.1","title":"Define Malli schemas for game data structures","description":"Create Malli schemas for:\n- Game state (players, board, pieces)\n- WebSocket messages (using messages.cljc types)\n- Piece data (position, size, orientation, target)\n- Player data (name, colour, pieces remaining)\n- Game options (timer, icehouse rule)\n\nPlace in src/cljc/icehouse/schema.cljc for sharing between frontend and backend.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T11:34:48.306815+13:00","created_by":"david","updated_at":"2026-01-02T20:57:52.166431+13:00","closed_at":"2026-01-02T20:57:52.166434+13:00","dependencies":[{"issue_id":"icehouse-tuy.1","depends_on_id":"icehouse-tuy","type":"parent-child","created_at":"2026-01-02T11:34:48.30776+13:00","created_by":"david"}]}
{"id":"icehouse-tuy.2","title":"Add Malli validation to frontend","description":"Add validation in ClojureScript:\n- Validate incoming WebSocket messages before processing\n- Validate outgoing messages before sending\n- Add dev-time instrumentation for function schemas\n- Display user-friendly validation errors","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T11:34:53.483166+13:00","created_by":"david","updated_at":"2026-01-02T21:00:41.937374+13:00","closed_at":"2026-01-02T21:00:41.937377+13:00","dependencies":[{"issue_id":"icehouse-tuy.2","depends_on_id":"icehouse-tuy","type":"parent-child","created_at":"2026-01-02T11:34:53.484046+13:00","created_by":"david"},{"issue_id":"icehouse-tuy.2","depends_on_id":"icehouse-tuy.1","type":"blocks","created_at":"2026-01-02T11:35:07.246041+13:00","created_by":"david"}]}
{"id":"icehouse-tuy.3","title":"Add Malli validation to backend","description":"Add validation in Clojure backend:\n- Validate incoming WebSocket messages in websocket.clj\n- Validate game state transitions in game.clj\n- Add instrumentation for critical game logic functions\n- Return structured validation errors to clients","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T11:34:57.274501+13:00","created_by":"david","updated_at":"2026-01-02T21:01:52.381538+13:00","closed_at":"2026-01-02T21:01:52.381541+13:00","dependencies":[{"issue_id":"icehouse-tuy.3","depends_on_id":"icehouse-tuy","type":"parent-child","created_at":"2026-01-02T11:34:57.275564+13:00","created_by":"david"},{"issue_id":"icehouse-tuy.3","depends_on_id":"icehouse-tuy.1","type":"blocks","created_at":"2026-01-02T11:35:07.319811+13:00","created_by":"david"}]}
{"id":"icehouse-u1v","title":"when placing a piece while zoomed and shift is pressed the piece should remain where it is and not jump to a different location","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T21:53:32.246228+13:00","updated_at":"2026-01-02T21:54:06.984833+13:00","closed_at":"2026-01-02T21:54:06.984833+13:00","close_reason":"Closed"}
{"id":"icehouse-u3m","title":"Add path traversal and input validation for game record storage","description":"storage.clj has potential security issues:\n1. game-record-path constructs paths directly from game-id without validation - could allow path traversal with '../' in game-id\n2. edn/read-string with untrusted data (slurped from disk) could be vulnerable to code injection\n3. No validation of game-id format before file operations\n4. .listFiles() can return null and cause NullPointerException\n\nShould add:\n- Validate game-id is alphanumeric/UUID format only\n- Sanitize file paths to prevent traversal\n- Use edn/read-string with :readers {false \"no\"} or safe-load alternatives\n- Add null checks for file operations","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-30T20:54:04.526074+13:00","updated_at":"2026-01-01T10:41:01.186568+13:00","closed_at":"2026-01-01T10:41:01.186568+13:00","close_reason":"Closed"}
{"id":"icehouse-un6","title":"Define constants for magic numbers","description":"Several magic numbers appear multiple times: Default throttle (2) in lobby.clj:15 and game.cljs:578, Zoom scale (4) appears 9+ times in game.cljs, Timer values (3000ms) in websocket.cljs:13-14. Create constants for DEFAULT_PLACEMENT_THROTTLE_SEC, DEFAULT_ZOOM_SCALE, RECONNECT_TIMEOUT_MS, ERROR_MSG_TIMEOUT_MS.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-10T20:51:32.08606+13:00","created_by":"david","updated_at":"2026-01-10T20:51:32.08606+13:00"}
{"id":"icehouse-usc","title":"Add unit test suite","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T12:36:00.518795+13:00","updated_at":"2026-01-01T10:09:19.048732+13:00","closed_at":"2025-12-27T13:32:34.682914+13:00","close_reason":"Closed"}
{"id":"icehouse-uu4","title":"on play field pieces should have the player's colour","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T14:52:54.304487+13:00","updated_at":"2026-01-01T10:09:19.045455+13:00","closed_at":"2025-12-27T15:04:56.417263+13:00","close_reason":"Closed"}
{"id":"icehouse-vev","title":"game timer","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T20:34:22.625129+13:00","updated_at":"2026-01-01T10:09:19.032734+13:00","closed_at":"2025-12-28T20:42:40.233962+13:00","close_reason":"Closed"}
{"id":"icehouse-vmd","title":"when dragging a piece from the stash there is no way to rotate it","description":"pressing the m key updates the MOVE message at the top, but rotation never starts. Also pressing and releasing the shift key should allow rotating to start","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T09:51:09.2235+13:00","created_by":"david","updated_at":"2026-01-10T10:39:39.273905+13:00","closed_at":"2026-01-10T10:39:39.273905+13:00","close_reason":"Closed"}
{"id":"icehouse-vre","title":"pressing m as a hotkey should toggle the same dragging behaviour as holding shift","description":"when dragging from a player stash this drag behaviour should be on, pressing m again will start the mouse rotating the piece","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T20:22:07.054515+13:00","created_by":"david","updated_at":"2026-01-09T20:30:03.293551+13:00","closed_at":"2026-01-09T20:30:03.293551+13:00","close_reason":"Closed"}
{"id":"icehouse-vyd","title":"Extract magic numbers to constants","description":"Move hardcoded values to named constants: zoom-scale (4), replay speeds [0.5 1 2 4], reconnect timeout (3000ms), tick interval (500ms). Frontend should mirror backend's constants organization.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-04T16:52:51.162251+13:00","created_by":"david","updated_at":"2026-01-04T18:28:02.381391+13:00","closed_at":"2026-01-04T18:28:02.381391+13:00","close_reason":"Closed"}
{"id":"icehouse-w15","title":"captured pieces show in the player's stash","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T13:04:44.691363+13:00","updated_at":"2026-01-01T10:09:19.0383+13:00","closed_at":"2025-12-28T13:08:28.526866+13:00","close_reason":"Closed"}
{"id":"icehouse-wj3","title":"when zoomed the piece border lines and diagonal lines should not be 4x thick","description":"same thickness as when not zoomed","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T21:31:08.793454+13:00","created_by":"david","updated_at":"2026-01-02T21:33:39.112581+13:00","closed_at":"2026-01-02T21:33:39.112581+13:00","close_reason":"Closed"}
{"id":"icehouse-wod","title":"Fix DEV MODE in lobby - enforce 3-4 player minimum for game start","description":"lobby.clj:77-79 all-ready? function has DEV MODE enabled:\nCurrent: requires only 1 player ready to start game\nShould: require 3-4 players all ready to start game\n\nThis breaks multiplayer gameplay - games start with only 1 player. This must be fixed before production. The comment indicates this was left in for development but was never reverted.","status":"open","priority":4,"issue_type":"bug","created_at":"2025-12-30T20:54:18.625342+13:00","updated_at":"2026-01-08T17:42:19.159437+13:00"}
{"id":"icehouse-xhe","title":"show final scores","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T20:35:22.051582+13:00","updated_at":"2026-01-01T10:09:19.031947+13:00","closed_at":"2025-12-28T20:41:23.271055+13:00","close_reason":"Closed"}
{"id":"icehouse-xsv","title":"Add architecture documentation and API docs","description":"Documentation is minimal. README has basic setup but lacks:\n- Architecture overview and component relationships\n- WebSocket message protocol specification\n- Game state data structures\n- Coordinate system and collision detection explanation\n- Frontend/backend data flow diagrams\n- API reference for WebSocket messages (types, payloads)\n- Deployment and configuration documentation\n\nShould add architecture.md or similar to explain system design.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-30T20:53:55.028646+13:00","updated_at":"2026-01-01T10:35:54.803179+13:00","closed_at":"2026-01-01T10:35:54.803179+13:00","close_reason":"Closed"}
{"id":"icehouse-y9s","title":"captured piece not shown in players stash","description":"after capturing the captured piece did not show in the stash area","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-28T19:43:00.67+13:00","updated_at":"2026-01-01T10:09:19.034582+13:00","closed_at":"2025-12-28T19:45:43.124611+13:00","close_reason":"Closed"}
{"id":"icehouse-yb1","title":"Implement game ending detection and handling","description":"Game ends when the timer runs out. Need to detect timer expiration and handle game ending appropriately.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-01T11:11:24.507442+13:00","created_by":"david","updated_at":"2026-01-05T17:03:08.754994+13:00","closed_at":"2026-01-05T17:03:08.754994+13:00","close_reason":"Already implemented - time-up?, game-over?, end-game! all exist"}
{"id":"icehouse-yg8","title":"Attack range measured to edge instead of center","description":"Fixed bug where attack range was measured from attacker tip to target CENTER instead of nearest EDGE. This caused valid-looking attacks to fail when the range indicator visually reached the target but the center was beyond range.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-28T13:30:11.588575+13:00","updated_at":"2026-01-01T10:09:19.037251+13:00","closed_at":"2025-12-28T13:30:16.46407+13:00","close_reason":"Closed"}
{"id":"icehouse-yia","title":"remove red highlighting of enemy defensive piece when the attack is out of range","description":"keep the green highlighting for a successful attack","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T10:39:17.440339+13:00","updated_at":"2026-01-01T10:09:19.028453+13:00","closed_at":"2025-12-29T10:44:14.146755+13:00","close_reason":"Closed"}
{"id":"icehouse-zc3","title":"Defensive pieces should be square with cross (pyramid viewed from above)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T12:38:26.005221+13:00","updated_at":"2026-01-01T10:09:19.048202+13:00","closed_at":"2025-12-27T13:40:28.82283+13:00","close_reason":"Closed"}
